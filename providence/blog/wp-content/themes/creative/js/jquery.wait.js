!function(e){var r="waitForImages";e.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"]},e.expr[":"].uncached=function(r){if(!e(r).is('img[src!=""]'))return!1;var n=new Image;return n.src=r.src,!n.complete},e.fn.waitForImages=function(n,a,c){var t=0,i=0;if(e.isPlainObject(arguments[0])&&(c=arguments[0].waitForAll,a=arguments[0].each,n=arguments[0].finished),n=n||e.noop,a=a||e.noop,c=!!c,!e.isFunction(n)||!e.isFunction(a))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var s=e(this),o=[],u=e.waitForImages.hasImageProperties||[],l=/url\(\s*(['"]?)(.*?)\1\s*\)/g;c?s.find("*").addBack().each(function(){var r=e(this);r.is("img:uncached")&&o.push({src:r.attr("src"),element:r[0]}),e.each(u,function(e,n){var a,c=r.css(n);if(!c)return!0;for(;a=l.exec(c);)o.push({src:a[2],element:r[0]})})}):s.find("img:uncached").each(function(){o.push({src:this.src,element:this})}),t=o.length,i=0,0===t&&n.call(s[0]),e.each(o,function(c,o){var u=new Image;e(u).on("load."+r+" error."+r,function(e){return i++,a.call(o.element,i,t,"load"==e.type),i==t?(n.call(s[0]),!1):void 0}),u.src=o.src})})}}(jQuery);